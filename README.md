# 知乎社区的Go语言简单实现
### 1.基本的用户系统
    1.注册与登陆
    2.用户基本信息
    3.密码从环境中获取
    4.用户信息的修改
### 2.文章与问题
    1.获取/删除/更新/发布
    2.恢复/评论
    3.对问题关注/评论点赞/帖子点赞
    4.热度排行榜
## 实现
    1.使用transaction保证要么全部成功，要么全部失败
    2.gorm.Expr(原子操作，避免并发竞争)
    
### 3.关注用户并接收其动态
    1.关注与取消
    2.关注列表与关注者列表
    3.获取指定用户主页(从关注列表进去可以过去个人信息)
## 写时更新
    1.用户查看关注动态直接从缓存读取，性能高
    使用Redis的zset存储动态时间线
    使用Goroutine异步执行推送逻辑，不阻塞主流程
### 4.内容的搜索
    1.全文索引（两个字段建立联合索引）
    用gorm快捷索引

### 5.文章状态
    1.草稿箱
    2.发布与删除
### 6.管理员禁言
### 7.限流机制（redis不太会）
### 8.配置管理（viper加载配置）
### 9.消息通知和后台私信
    1.红点点
## 缓存策略
    1.使用返回一个错误，防止缓存穿透
    2.使用singleflight锁第一个请求，避免大量请求同时查询数据库，防止缓存击穿
    3.随机过期时间防止缓存雪崩
## 添加context和gorm.DB
    1.避免雪崩
    2.错误可视察
    3.保持数据一致
    4.增强系统健壮性和可维护性